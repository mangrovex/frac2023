# facial-recognition-server

## Launching the server

Before you begin also install the following prerequisites:

    sudo apt update
    sudo apt install npm nodejs nodejs-dev nodejs-legacy
    sudo apt install libzmq3-dev libkrb5-dev

Install the Node.js dependencies (swagger-routes restify sqlite3 uuid4 mosca):
~~~~
npm install
~~~~

Start the server:
~~~~
cd node-server
node ./server.js
~~~~

## API Documentation
[https://scenarios.stoplight.io/amplified-by-design/specs/facial-recognition]

## MQTT
Mosca MQTT broker is automatically started on port 1833.  This can be changed in the configuration file.
For testing or debugging the MQTT broker, if necessary, you can use:
 * [mosquitto-clients](https://mosquitto.org/download/)
 * [mqtt-spy](http://kamilfb.github.io/mqtt-spy/)

### User Database
To edit the sqlite3 database that stores user profiles (./node-server/db/data.db) you can use sqlitebrowser:

    sudo apt update
    sudo apt install sqlitebrowser

### User Thumbnails
Profile thumbnails generated by recognizer_matcher need to be placed under ./node-server/public/profile. To do this
use the FACE_IMAGES environment variable.

